Привет. Представь, что я твой заказчик. После нескольких часов переговоров мы с тобой определились, что ты мне напишешь бота-магазин, с реферальной системой вознаграждения.

Мои требования:

1. Я, как админ, должен со своего аккаунта уметь добавлять новые товары. У товаров будут фотография, название, описание, цена. Способ покупки - на твое усмотрение, будь то киви, биткоин или еще что-то.

2. По реферальной системе я хочу, чтобы новый пользователь мог быть добавлен только по инвайту. То есть, новому пользователю обязательно нужно быть приглашенным от кого-то, иначе бот для него будет недоступен. Если пришел без инвайта - бот говорит, "Чтобы использовать этого бота введите код приглашения, либо пройдите по реферальной ссылке". Поэтому нужно еще предусмотреть возможность ручного ввода кода приглашения. За каждого реферала пользователь получает 10 баллов = 10 USD, которые у него могут быть потрачены на покупку товара.

3. Если человек пришел без приглашения, то пусть он хотя бы подпишется на мой канал (создайте его сами), и тогда ему откроется доступ. В качестве реферального айди (если у вас такой будет) можно поставить айди канала.

4. При нажатии команды старт (или после регистрации пользователя) отдай инлайн кнопки, где будет понятно, что умеет бот, и можно будет по ним зайти в реферальную систему, или админку (если пользователь админ), или что-то еще.

5. Я хочу, чтобы можно было искать товары только с помощью инлайн мода. чтобы в нем выводилась превьюшка фото, название товара и его цена. Не хочу, чтобы приходилось тыкать на миллион кнопок перед тем как найти товар, хочу только инлайн мод. Вводишь первые 2 буквы и он уже ищет совпадения по названию или описанию (подсказка, используй запрос к SQL базе со словом ILIKE). При этом, если пользователь ничего не ввел в инлайн моде - выдавать ему список товаров отсортированных в алфавитном порядке (название товара).

6. По нажатию на кнопку "Выбрать товар" откроется инлайн режим с пустым вводом, чтобы отобразились те самые товары. 

7. После выбора товара, я хочу чтобы была инлайн кнопка "Показать товар", в которой будет спрятана ссылка на бота, где будут передаваться параметры выбранного товара. То есть, по нажатию на эту кнопку, покупатель переходит в бота и жмет команду "/start" и бот ему сразу выдает полную информацию о товаре, а под ним будет кнопка "Купить", по нажатию на которую бот предлагает ввести количество товара, адрес доставки и предлагает пользователю оплатить. Способ оплаты - на ваш выбор.

8. Так как я немного понимаю как использовать сервер и что такое докер, но не шарю в написании ботов ничего, я хочу, чтобы ты мне подготовил код со сборкой с докером, чтобы я на сервере взял и просто запустил бота и базу командой docker-compose.

UPD 26.08.20: Запусти бота на сервере и добавь меня в админы, либо дай доступ к Django админке. Бота необходимо будет протестировать

UPD 08.04.21: Базу необходимо заполнить 6 и больше товарами.

Вопросы к этому заданию
Подготовь код бота. Залей на гитхаб (если хочешь сделай приватный репозиторий и открой его мне, или сделай публичный и скинь ссылку).



Использовать изложенную в курсе архитектуру в этом задании ОБЯЗАТЕЛЬНО.
